//--------------------------------------------------------------------------------------------------
//= Sdraw.hsp
//--------------------------------------------------------------------------------------------------
//　描画処理
//--------------------------------------------------------------------------------------------------

	//----------------------------------------------------------------------------------------------
	//= 下書きアルファマップ
	//----------------------------------------------------------------------------------------------
		gsel SCR_DRAFT_ALPHA

			//--------------------------------------------------------------------------------------
			//=画面初期化 
			//--------------------------------------------------------------------------------------
				gosub *__ClearScreen

	//----------------------------------------------------------------------------------------------
	//= 下書きウィンドウ
	//----------------------------------------------------------------------------------------------
		gsel SCR_DRAFT

			//--------------------------------------------------------------------------------------
			//= 画面初期化
			//--------------------------------------------------------------------------------------
				gosub *__ClearScreen

			//--------------------------------------------------------------------------------------
			//= コンボカウンター描画
			//--------------------------------------------------------------------------------------
				if( ComboCounterShow == TRUE )&&( PJEndFlag == FALSE ){
					repeat PLAYER_NUMBER
						if( ComboCounterFlag(cnt) == TRUE ){
							x = BASE_POS_X+FRAME_SIZE_W*cnt	:	y = BASE_POS_Y
							pos x+ComboCounterPosX(cnt), y+ComboCounterPosY(cnt)
							CCDraw ComboCounter(cnt), SCR_DRAFT,		SCR_CCFONT
							//下書きアルファマップへも描画
							pos x+ComboCounterPosX(cnt), y+ComboCounterPosY(cnt)
							CCDraw ComboCounter(cnt), SCR_DRAFT_ALPHA,	SCR_CCFONT_ALPHA
						}
					loop
				}

	//----------------------------------------------------------------------------------------------
	//= OPSウィンドウアルファマップ
	//----------------------------------------------------------------------------------------------
		gsel SCR_OPS_ALPHA

		//------------------------------------------------------------------------------------------
		//= 画面初期化
		//------------------------------------------------------------------------------------------
			gosub *__ClearScreen

		//------------------------------------------------------------------------------------------
		//= 下書きアルファマップからコピー
		//------------------------------------------------------------------------------------------
			gmode 0
			pos 0, 0
			ImgP_gzoom ginfo_winx, ginfo_winy, SCR_DRAFT_ALPHA, 0, 0, DRAFT_WINDOW_SIZE_W, DRAFT_WINDOW_SIZE_H

	//----------------------------------------------------------------------------------------------
	//= OPSウィンドウ
	//----------------------------------------------------------------------------------------------
		gsel SCR_OPS

		//------------------------------------------------------------------------------------------
		//= 画面更新停止, 初期化
		//------------------------------------------------------------------------------------------
			redraw 0
			gosub *__ClearScreen

		//------------------------------------------------------------------------------------------
		//= 下書きウィンドウからコピー
		//------------------------------------------------------------------------------------------
			gmode 0
			pos 0, 0
			ImgP_gzoom ginfo_winx, ginfo_winy, SCR_DRAFT, 0, 0, DRAFT_WINDOW_SIZE_W, DRAFT_WINDOW_SIZE_H

		//------------------------------------------------------------------------------------------
		//= 再描画
		//------------------------------------------------------------------------------------------
			redraw 1

		//------------------------------------------------------------------------------------------
		//= レイヤードウィンドウ処理
		//------------------------------------------------------------------------------------------
			enableAlphaBlendWindow SCR_OPS_ALPHA